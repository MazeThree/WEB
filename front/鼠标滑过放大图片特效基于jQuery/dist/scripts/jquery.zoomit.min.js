!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){t.fn.zoomIt=function(o){var i={enabled:1,status:0,loaded:0,img:t(this),offset:[0,0],"class":{container:"zoomit-container",loaded:"loaded",img:"zoomit-zoomed",ghost:"zoomit-ghost"},src:function(){return this.img.data("zoomed")},getSrc:function(){return"function"==typeof this.src?this.src():this.src},imgTag:null};o=t.extend(i,o),o.execute=function(t){"string"==typeof t&&"function"==typeof o[t]&&o[t](o)},o.getContainer=function(){return t('<div class="'+o["class"].container+'"></div>')},o.getImgSrc=function(){return null===o.imgTag&&(o.imgTag=t("<img />").addClass(o["class"].img).attr("src",this.getSrc()),"undefined"!=typeof o.img.attr("alt")&&o.imgTag.attr("alt",o.img.attr("alt"))),o.imgTag},o.getZoomInstance=function(){return o.img.parent().find("."+o["class"].img)},o.restrict=function(t){return t>1?t=1:0>t&&(t=0),t},o.getDimensions=function(){o.position={img:{width:o.img.width(),height:o.img.height(),offset:o.img.offset()},zoom:{width:o.getZoomInstance().width(),height:o.getZoomInstance().height()}}},o.setPosition=function(t){"undefined"!=typeof t.originalEvent&&(t=t.originalEvent),0===o.loaded&&o.getDimensions(),o.img.parent().addClass(o["class"].loaded),o.loaded=1,o.position.x=o.restrict((t.pageX-o.position.img.offset.left)/o.position.img.width),o.position.y=o.restrict((t.pageY-o.position.img.offset.top)/o.position.img.height),o.position.zoom.offset={left:(o.position.zoom.width-o.position.img.width)*o.position.x,top:(o.position.zoom.height-o.position.img.height)*o.position.y},o.getZoomInstance().css({transform:"translate(-"+o.position.zoom.offset.left+"px, -"+o.position.zoom.offset.top+"px)"})},o.show=function(t){!o.enabled||1===o.status&&0===o.loaded||(o.status=1,0==o.img.parent().find("."+o["class"].img).length?(o.img.after(o.getImgSrc()),o.getZoomInstance().on("load",function(){o.setPosition(t)}).each(function(){this.complete&&o.setPosition(t)})):o.setPosition(t),o.execute("onZoomIn"))},o.hide=function(){o.status=0,o.loaded=0,o.imgTag=null,o.img.parent().removeClass(o["class"].loaded),o.getZoomInstance().remove(),o.execute("onZoomOut")},o.move=function(t){o.status&&o.show(t)},o.enable=function(){o.enabled=1},o.disable=function(){o.enabled=0},o.init=function(){o.img.wrap(o.getContainer()).after('<div class="'+o["class"].ghost+'"></div>'),o.ghost=o.img.parent().find("."+o["class"].ghost),o.ghost.on("mouseenter touchstart",function(t){o.show(t)}).on("mouseleave touchend",function(){o.hide()}).on("mousemove touchmove",function(t){t.stopPropagation(),t.preventDefault(),o.move(t)}).on("click",function(){o.execute("onClick")}),o.execute("onInit")},o.img.data("zoom",o),o.init()}});